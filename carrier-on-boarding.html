<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carrier Onboarding - Go Ventures</title>
  <link rel="icon" href="logo.ico" type="image/x-icon" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    body { background-color: #121212; color: #e0e0e0; font-family: 'Poppins', sans-serif; }
    .navbar { background: #000; }
    .btn-primary { background: #00b4d8; border: none; }
    .btn-primary:hover { background: #0090ad; }
    .modal-content { background: #1e1e1e; border-radius: 16px; padding: 20px; color: #fff; animation: fadeInUp 0.45s ease; }
    @keyframes fadeInUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .step { display: none; }
    .step.active { display: block; animation: fadeIn .45s ease-in-out; }
    @keyframes fadeIn { from { opacity:0; transform: scale(.98); } to { opacity:1; transform:scale(1); } }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="#"><img src="images/logo.png" alt="Go Ventures Logo" style="height:50px;"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="mainNavbar">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="index.html#services">Services</a></li>
        <li class="nav-item"><a class="nav-link" href="trucktypes.html">Truck Types</a></li>
        <li class="nav-item"><a class="nav-link" href="index.html#about-us">About Us</a></li>
        <li class="nav-item"><a class="nav-link" href="ContactUs.html">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- HERO SECTION -->
<header class="hero d-flex align-items-center text-center" style="height: 100vh; background: url('images/bggo.jpg') center/cover no-repeat; position: relative;">
  <div style="background: rgba(0,0,0,0.6); position:absolute; inset:0;"></div>
  <div class="container text-white position-relative">
    <h1 class="fw-bold">Carrier Onboarding</h1>
    <p class="lead">Join Go Ventures Dispatch in just a few easy steps.</p>
    <button class="btn btn-primary btn-lg mt-3" data-bs-toggle="modal" data-bs-target="#onboardingModal">Get Started</button>
  </div>
</header>

<!-- ONBOARDING MODAL -->
<div class="modal fade" id="onboardingModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content shadow-lg border-0" style="border-radius: 20px;">
      <div class="modal-body p-5">

        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 class="fw-bold mb-0 text-info">Carrier Onboarding</h5>
          <span class="badge bg-secondary" id="stepIndicator">Step 1 of 4</span>
        </div>
        <hr class="mb-4">

        <form id="onboardForm" novalidate>

          <!-- STEP 1 -->
          <div class="step active" id="step1">
            <h3 class="fw-bold mb-3">Welcome to Go Ventures Dispatch!</h3>
            <p class="lead">Weâ€™re excited to have you onboard ðŸš›<br>Are you ready to get started?</p>
            <div class="text-end">
              <button type="button" class="btn btn-primary btn-lg nextBtn">Yes, Letâ€™s Go</button>
            </div>
          </div>

          <!-- STEP 2 -->
          <div class="step" id="step2">
            <h4 class="fw-bold">Company Information</h4>
            <div id="step2Error" class="alert alert-danger d-none"></div>
            <div class="row g-3 mt-2">
              <div class="col-md-6"><label class="form-label">Company Name</label><input type="text" id="companyName" name="companyName" class="form-control form-control-lg" required></div>
              <div class="col-md-6"><label class="form-label">MC Number</label><input type="text" id="mcNumber" name="mcNumber" class="form-control form-control-lg" required></div>
              <div class="col-md-6"><label class="form-label">DOT Number</label><input type="text" id="dotNumber" name="dotNumber" class="form-control form-control-lg" required></div>
              <div class="col-md-6"><label class="form-label">Email</label><input type="email" id="email" name="email" class="form-control form-control-lg" required></div>
              <div class="col-md-6"><label class="form-label">Phone</label><input type="text" id="phone" name="phone" class="form-control form-control-lg" required></div>
              <div class="col-md-6"><label class="form-label">Address</label><input type="text" id="address" name="address" class="form-control form-control-lg" required></div>
            </div>
            <div class="text-end mt-4">
              <button type="button" class="btn btn-secondary prevBtn d-none">Back</button>
              <button type="button" class="btn btn-primary nextBtn">Next</button>
            </div>
          </div>

          <!-- STEP 3 -->
          <div class="step" id="step3">
            <h4 class="fw-bold">Required Documents</h4>
            <div id="step3Error" class="alert alert-danger d-none"></div>
            <p class="mt-2">Select the documents youâ€™ll upload:</p>
            <div class="row g-3">
              <div class="col-md-6"><div class="form-check"><input class="form-check-input doc-checkbox" type="checkbox" id="docW9"><label class="form-check-label" for="docW9">W9 Form</label></div></div>
              <div class="col-md-6"><div class="form-check"><input class="form-check-input doc-checkbox" type="checkbox" id="docMC"><label class="form-check-label" for="docMC">MC Authority Letter</label></div></div>
              <div class="col-md-6"><div class="form-check"><input class="form-check-input doc-checkbox" type="checkbox" id="docInsurance"><label class="form-check-label" for="docInsurance">Certificate of Insurance</label></div></div>
              <div class="col-md-6"><div class="form-check"><input class="form-check-input doc-checkbox" type="checkbox" id="docBank"><label class="form-check-label" for="docBank">Voided Check / NOA</label></div></div>
            </div>
            <div class="text-end mt-4">
              <button type="button" class="btn btn-secondary prevBtn">Back</button>
              <button type="button" class="btn btn-primary nextBtn">Next</button>
            </div>
          </div>

          <!-- STEP 4 -->
          <div class="step" id="step4">
            <h4 class="fw-bold">Upload Documents</h4>
            <p class="text-muted">Attach the documents you selected (PDF, JPG, PNG, DOCX; max 10MB each):</p>
            <div id="uploadFields" class="mb-3"></div>
            <div id="step4Error" class="alert alert-danger d-none"></div>
            <div class="form-check my-3">
              <input class="form-check-input" id="confirmCheck" type="checkbox" required>
              <label class="form-check-label" for="confirmCheck">I confirm the information is true and accurate.</label>
            </div>
            <div class="text-end">
              <button type="button" class="btn btn-secondary prevBtn">Back</button>
              <button type="submit" class="btn btn-success btn-lg">Submit</button>
            </div>
          </div>

        </form>

      </div>
    </div>
  </div>
</div>

<!-- FOOTER -->
 <footer class="text-white">
    <div class="container">
      <div class="row">
        <div class="col-md-4 mb-4">
          <h5 class="fw-bold text-uppercase">Go Ventures</h5>
          <p>Reliable Ground Freight Solutions across the USA. Driving your ventures forward with efficiency, safety, and speed.</p>
        </div>
        <div class="col-md-4 mb-4">
          <h5 class="fw-bold text-uppercase">Contact Info</h5>
          <ul class="list-unstyled small">
            <li><i class="bi bi-geo-alt-fill text-primary me-2"></i>10510 W ALIANA TRACE DR APT 463 RICHMOND, TEXAS 77407</li>
            <li><i class="bi bi-telephone-fill text-primary me-2"></i>+1 (408) 412-1195</li>
            <li><i class="bi bi-envelope-fill text-primary me-2"></i>info@goventuresdispatch.com</li>
          </ul>
        </div>
        <div class="col-md-4 mb-4">
          <h5 class="fw-bold text-uppercase">Quick Links</h5>
          <ul class="list-unstyled small">
            <li><a href="Home.html">Home</a></li>
            <li><a href="index.html#about">About Us</a></li>
            <li><a href="index.html#services">Services</a></li>
            <li><a href="ContactUs.html">Contact</a></li>
          </ul>
        </div>
      </div>
      <hr class="border-secondary">
      <div class="text-center pb-3 small">Â© 2025 Go Ventures. All Rights Reserved.</div>
    </div>
  </footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Onboarding Logic -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const steps = document.querySelectorAll(".step");
  const stepIndicator = document.getElementById("stepIndicator");
  let currentStep = 0;

  function showStep(i){
    steps.forEach((s, idx)=>s.classList.toggle("active", idx===i));
    stepIndicator.textContent = `Step ${i+1} of ${steps.length}`;
    document.querySelectorAll(".prevBtn").forEach(b=>b.classList.toggle("d-none", i===0));
    if(i === 3) generateUploadFields();
    hideErrors();
  }

  function hideErrors(){
    document.querySelectorAll("#step2Error,#step3Error,#step4Error").forEach(e=>{e.classList.add("d-none"); e.innerText="";});
  }

  function validateStep2(){
    const emailRe=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    const v=id=>document.getElementById(id).value.trim();
    const err=document.getElementById("step2Error");
    if(!v("companyName") || !v("mcNumber") || !v("dotNumber") || !v("email") || !v("phone") || !v("address")){
      err.innerText="Please fill all company fields."; err.classList.remove("d-none"); return false;
    }
    if(!emailRe.test(v("email"))){
      err.innerText="Invalid email."; err.classList.remove("d-none"); return false;
    }
    return true;
  }

  function validateStep3(){
    const checked=document.querySelectorAll("#step3 .doc-checkbox:checked");
    if(checked.length===0){
      const err=document.getElementById("step3Error");
      err.innerText="Please select at least one document."; err.classList.remove("d-none");
      return false;
    }
    return true;
  }

  function generateUploadFields(){
    const container=document.getElementById("uploadFields"); container.innerHTML="";
    const map={docW9:{label:"W9 Form",name:"w9File"},docMC:{label:"MC Authority Letter",name:"mcFile"},docInsurance:{label:"Certificate of Insurance",name:"insuranceFile"},docBank:{label:"Voided Check / NOA",name:"bankFile"}};
    let any=false;
    for(const id in map){
      const cb=document.getElementById(id);
      if(cb && cb.checked){
        any=true;
        container.insertAdjacentHTML("beforeend",`<div class="mb-3"><label class="form-label">${map[id].label}</label><input type="file" class="form-control form-control-lg" name="${map[id].name}" accept=".pdf,.png,.jpg,.jpeg,.doc,.docx" required></div>`);
      }
    }
    if(!any){
      container.innerHTML='<div class="alert alert-warning">No documents selected â€” go back and pick the documents you want to attach.</div>';
    }
  }

  document.addEventListener("click", ev => {
    if(ev.target.matches(".nextBtn")){
      if(currentStep === 1 && !validateStep2()) return;
      if(currentStep === 2 && !validateStep3()) return;
      if(currentStep < steps.length - 1){ currentStep++; showStep(currentStep); }
    }
    if(ev.target.matches(".prevBtn")){
      if(currentStep > 0){ currentStep--; showStep(currentStep); }
    }
  });

  document.getElementById("onboardForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
    const jsonData = {};

    formData.forEach((val, key) => {
      if(!(val instanceof File)) jsonData[key] = val;
    });

    const filePromises = [];
    form.querySelectorAll("input[type=file]").forEach(input => {
      if(input.files.length > 0){
        const file = input.files[0];
        filePromises.push(new Promise((resolve) => {
          const reader = new FileReader();
          reader.onload = () => {
            jsonData[input.name] = {
              filename: file.name,
              type: file.type,
              data: reader.result.split(",")[1]
            };
            resolve();
          };
          reader.readAsDataURL(file);
        }));
      }
    });

    await Promise.all(filePromises);

    try {
      const webAppUrl = "https://script.google.com/macros/s/AKfycbzq7h_7R3Zl-76xW2WEZ1pdzdBmFiRtuDOZ303ONCkpHx9zftmFD85GOBshrBOz_vj9Lg/exec";
      let res = await fetch(webAppUrl, {
        method: "POST",
        headers: { "Content-Type": "text/plain;charset=UTF-8" },
        body: JSON.stringify(jsonData)
      });

      if (!res.ok) throw new Error("HTTP error " + res.status);
      let result = await res.json();
      if (result.status === "success") {
  window.location.href = "thanks.html";
} else {
  alert("Error: " + result.message);
}

    } catch (err) {
      alert("Fetch failed: " + err.message);
      console.error(err);
    }
  });

  showStep(currentStep);
});
</script>

</body>
</html>

